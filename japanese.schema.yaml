# Rime schema
# vim: set sw=2 sts=2 et:
# encoding: utf-8

schema:
  schema_id: japanese
  name: æ—¥æœ¬èªå…¥åŠ›
  version: 'v1.0 2023.4.10'
  author:
    - ensigma96 <ensigma96@gmail.com>
  dependencies:

switches:
  - name: ascii_mode
    reset: 0
    states: [ æ—¥è¯­, è‹±æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_jp
    reset: 1
    states: [ "ğŸ˜­ï¸", "ğŸ˜„ï¸" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - reverse_lookup_translator
    # - table_translator@custom_phrase  # æ·»åŠ  è°ƒç”¨custom_phraseè‡ªå®šä¹‰çŸ­è¯­
    - lua_translator@date_translator  # æ·»åŠ  è°ƒç”¨Rime-luaæ’ä»¶ï¼Œè‡ªå®šä¹‰ç³»ç»Ÿå˜é‡è¾“å‡ºæ—¥æœŸã€æ˜ŸæœŸã€æ—¶é—´ç±»å‹è¾“å‡º
    # - lua_translator@calculator_translator # æ·»åŠ  ç®€æ˜“è®¡ç®—å™¨luaï¼ŒæŒ‰ç¬¦å·"="æ¿€æ´»è®¡ç®—å™¨
  filters:
    # - simplifier
    - uniquifier
    - simplifier@emoji_jp

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba:,.!()/-=_+    #'zyxwvutsrqponmlkjihgfedcba-_'
  delimiter: " '"  #"ï¼Œ"é€—å·åˆ†è¯
  algebra:
  # ç‰¹æ®Šå‡åå¤„ç†
    # - xform/[aiueo]ly/y/
    # - xform/[aiueo]lw/w/
    # - xform/ltu([a-z])/$1$1/
    # - xform/[aiueo]l([aiueo])/$1/

    # é•¿éŸ³ç¬¦å·
    # - xform/ãƒ¼/-
    # åŸºç¡€ï¼ˆç®€æ‹¼ï¼‰
    # - abbrev/^([a-z]).+$/$1/
    # - abbrev/^([zcs]h).+$/$1/

    # å…¼å®¹å…¶ä»–æ‹¼å†™æ–¹å¼
    - derive/-/q/      # q => -
    - derive/fu/hu/  # fu
    - derive/chi/ti/
    - derive/tsu/tu/  # tsu
    - derive/shi/si/  #ã—

    # å°å­—æ¯
    - derive/x/l/              # l = x
    # - derive/ly([auo])/xy$1/   # lya lyu lyo  => xya xyu xyo
    # - derive/xy([auo])/ly$1/   # xya xyu xyo  => lya lyu lyo
    # - derive/ltu/xtu/
    # - derive/lwa/xwa/
    # ä¿ƒéŸ³ã£
    # - derive/^([kgptsdhbrjzv])\1([aiueo])/ltu$1$2/
    # - derive/([t])\1(su)/ltu$1$2/
    # - derive/^([kszcnhbprftd])\1y([auo])/ltu$1y$2/  # 
    # - derive/([kg])\1w([aiueo])/ltu$1w$2/  # 
    # - derive/([f])\1([aieuo])/ltu$1$2/  # ffa ffi ffe ffo
    # - derive/s(shi)/ltu$1/
    # - derive/tch([eauo])/ltuch$1/  # tche tcha tchu tcho

    # - derive/zi/ji/
    # - derive/zy([auo])/j$1/
    - derive/sy([auo])/sh$1/
    # - derive/^nn$/n/


translator:
  dictionary: japanese
  spelling_hints: 15        # è¨­å®šå¤šå°‘å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´å¸¶èª¿æ‹¼éŸ³ã€”åƒ…script_translatoræœ‰æ•ˆã€•
  enable_completion: true   # æå‰æ˜¾ç¤ºå°šæœªè¾“å…¥å®Œæ•´ç çš„å­—ã€”true æˆ– falseã€•ç¼–ç é€æ¸æç¤ºå¼€å…³ï¼›ç¼–ç æç¤º
  enable_sentence: true     # æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥ã€”true æˆ– falseã€•
  comment_format:
    - 'xlit|q|ãƒ¼|'
  preedit_format:
    # - xform/(^|\s)ten/ãƒ»/
    # - xform/(^|\s)symbol/ã€…/
    - xform/(^|\s)-/ãƒ¼/
    - xform/(^|\s)q/ãƒ¼/
    - xform/(^|\s)~/ã€œ/


# è‡ªå®šä¹‰çŸ­è¯­ Custom_phrase.txt # Tab ä¸èƒ½ç”¨ç©ºæ ¼ä»£æ›¿
# custom_phrase:
#   dictionary: ""
#   user_dict: custom_phrase     #è®¾å®šç”¨æˆ·è¯å…¸å
#   db_class: stabledb           #è®¾å®šç”¨æˆ·è¯å…¸ç±»å‹ï¼Œå¯è®¾ tabledbã€”æ–‡æœ¬ã€•æˆ– userdbã€”äºŒè¿›åˆ¶ã€•
#   enable_completion: false     #æå‰æ˜¾ç¤ºå°šæœªè¾“å…¥å®Œæ•´ç çš„å­—ã€”true æˆ– falseã€•
#   enable_sentence: false       #æ˜¯å¦å¼€å¯è‡ªåŠ¨é€ å¥ã€”true æˆ– falseã€•
#   initial_quality: 1           #è®¾å®šæ­¤ç¿»è¯‘å™¨ç»“æœä¼˜å…ˆçº§ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰çš„è¯æ’åœ¨å‰é¢ï¼Œè¿™ä¸ªå€¼å°½é‡è®¾å¤§ä¸€ç‚¹
  
# æ—¥è¯­ç‰ˆçš„emojiè¡¨æƒ…
emoji_jp:
  opencc_config: emoji_Japanese.json
  option_name: emoji_jp
  tips: all

# reverse_lookup:
#   dictionary: japanese
#   prefix: "`"
#   suffix: "'"
#   tips: ã€”æ—¥è¯­ã€•
#   preedit_format:


punctuator:
  import_preset: symbols_custom_ja
  # __include: symbols_custom_ja:/

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "`[a-z]*'?$"
    email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"                            # è‡ªå¸¦çš„ï¼Œe-mail æ­£åˆ™
    # uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"                           # è‡ªå¸¦çš„ï¼Œå¤§å†™å­—æ¯å¼€å¤´åï¼Œå¯ä»¥è¾“å…¥[-_+.'0-9A-Za-z]è¿™äº›å­—ç¬¦
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"  # è‡ªå¸¦çš„ï¼ŒURL æ­£åˆ™
    url_2: "^[A-Za-z]+[.].*"          # æ”¯æŒ google.com abc.txt ç­‰ç½‘å€æˆ–æ–‡ä»¶åï¼Œä¼šå¯¼è‡´å¥å·ä¸ä¼šè®©å¥å­ä¸Šå±ï¼Œæˆ–ä½¿ç”¨å¥å·ç¿»é¡µæ—¶éœ€è¦æ³¨é‡Šæ‰
    win_path: "^[A-Za-z]:.*"          # æ”¯æŒ c:\file\path ä¹‹ç±»çš„è·¯å¾„è¾“å…¥
    colon: "^[A-Za-z]+:.*"            # ä¸Šé¢çš„è¶…é›†ï¼Œå¯ä»¥è¾“å…¥å†’å·ï¼Œä¸ä¼šå¯¼è‡´å¥å­ç›´æ¥ä¸Šå±
    underscore: "^[A-Za-z]+_.*"       # å¯ä»¥è¾“å…¥ä¸‹åˆ’çº¿ _ ï¼Œä¸ä¼šå¯¼è‡´å¥å­ç›´æ¥ä¸Šå±
    punct: "^v([0-9]|10|[A-Za-z]+)$"  # å“åº” symbols_custom_ja.yaml ä¸‹çš„ punctuator/symbolsï¼Œç”¨ã€Œvã€æ›¿æ¢ã€Œ/ã€å¹¶æ”¯æŒå¤§å†™
    unicode: "^U[a-f0-9]+"            # å“åº” Unicode
    # expression: "^=.*$"  #è®¡ç®—å™¨lua = å¼•å¯¼,

key_binder:
  import_preset: default
  # bindings:
  # è®¾ç½®å“ªäº›é”®å¯ä»¥ç¿»é¡µï¼Œéœ€è¦å“ªä¸ªå–æ¶ˆæ³¨é‡Šå³å¯
    # # è‡ªå®šä¹‰
    # - {accept: "~", send: "Shift+Right", when: has_menu}  #æ‰‹æœºä¸Šç”¨  åˆ‡æ¢ç¼–ç åˆ‡åˆ†
    # - {accept: "'", send: "Shift+Delete", when: has_menu}  #æ‰‹æœºä¸Šç”¨  åˆ è¯
    # - { when: has_menu, accept: "#", toggle: emoji_suggestion } # æ‰‹æœºä¸Šç”¨ï¼šåœ¨è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œåˆ‡æ¢Emojiå¼€å…³çš„å¿«æ·é”®ï¼Œè¿™é‡Œç”¨#å·åˆ‡æ¢
    # - { when: always, accept: "^", select: .next }   #æ‰‹æœºä¸Šç”¨åˆ‡æ¢è¾“å…¥æ³•

    # - { when: has_menu, accept: "#", toggle: emoji_jp } # åœ¨è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œåˆ‡æ¢Emojiå¼€å…³çš„å¿«æ·é”®ï¼Œè¿™é‡Œç”¨#å·åˆ‡æ¢
    # - { when: has_menu, accept: "F6", toggle: emoji_jp } # windowåœ¨è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œç”¨F6å¿«æ·é”®ï¼Œåˆ‡æ¢Emojiå¼€å…³
    # - { when: always, accept: Control+Shift+space, select: .next }